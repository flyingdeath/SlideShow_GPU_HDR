<!DOCTYPE html>
<html lang="en">
	<head>
		<title id="SlideShowTitle">The Sea By,  Brian Spiegel.</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="/SlideShow_GPU_HDR/yui/build/fonts/fonts-min.css">
		<link type="text/css" rel="stylesheet" href="/SlideShow_GPU_HDR/yui/build/slider/assets/skins/sam/slider.css">
		<link type="text/css" rel="stylesheet" href="/SlideShow_GPU_HDR/yui/build/button/assets/skins/sam/button.css">
		<link type="text/css" rel="stylesheet" href="/SlideShow_GPU_HDR/yui/build/treeview/assets/skins/sam/treeview.css">
		<script src="/SlideShow_GPU_HDR/js/helperClass.js" type="text/javascript"></script>
     <script type="text/javascript" language="JavaScript"  src="/SlideShow_GPU_HDR/js/slideShowClass.js"></script>
     <!--script type="text/javascript" language="JavaScript"  src="/js/debugClass.js"></script-->


		<script src="/SlideShow_GPU_HDR/yui/build/yahoo/yahoo.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/dom/dom.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/event/event.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/container/container.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/menu/menu-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/connection/connection-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/dragdrop/dragdrop-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/slider/slider.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/animation/animation-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/datasource/datasource-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/autocomplete/autocomplete-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/element/element-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/button/button-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/dragdrop/dragdrop-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/treeview/treeview-min.js" type="text/javascript"></script>
		<script src="/SlideShow_GPU_HDR/yui/build/resize/resize.js" type="text/javascript"></script>
    <style type="text/css"><!--
    	#pausebtn{
				position:absolute;
				left:50%;
				bottom:0px;
	    	}
	    	#mutebtn{
				position:absolute;
				left:25%;
				bottom:0px;


	    	}
	      #btncontainer{
				position:absolute;
				top:0px;
				bottom:40px;
				width:99%;

	      }
	      #dummy,
	      #dummy2,
	      #dummy3{
				position:absolute;
				top:0px;
				left:0px;

	      }
	      #sig{
	        width:1060px;
	        margin-left:auto;
	        margin-right:auto;
				position:absolute;
				bottom:10px;
				right:25%;
	      }
	      #sig p,
	      #title_sig{
	        text-align:right;
	      }
	      #container{
	        position:absolute;
	      }
	      #innerContainer{
	        position:relative;
	        width:1024px;
	        margin-left:auto;
	        margin-right:auto;
	      }
		  #mutebtn{
		  	width:50px;
		  	height:50px;
		  }
	     #text_items, #text_items2{
			position:absolute;
	        width:1024px;
	        height:768px;
	        margin-left:auto;
	        margin-right:auto;
	        color:#FFF;
	        top:0px;
      }

      #text_items div,
      #text_items2 div{
        display:none;
      }
      #item2_0 h1,
      #item2_1 h2,
      #item_0 h1,
      #item_1 h2{
        text-align:center;

      }
      body{
      	color:#FFF;
      	background-color:#000;
      }
      #projects_container{
      	display:none;
      	padding-left: 36px;
      }
	  div#innerBtnContainer:hover #projects_container{
		display:inline-block;
	  }
  	  .thumbnail{
  	  	width:128px;
  	  	height:86px;
  	  }
  	  #menuBtn{
  	  	width:32px;
  	  	height:32px;
  	  	top:0px;
	    position:absolute;

  	  }
  	  #innerBtnContainer{
	    position:absolute;

  	  }
      -->
    </style>
	</head>

	<body>
  <div id="page">
    <div id="container">
       <div id="innerContainer">
		   <div id="text_items">
				<div id="item_0"><h1>The Sea </h1>
									<span id="title_sig">
									  <p>By Brian Spiegel.<br/></p>
									</span>
				</div>
				<div id="item_1"><h2>I want to show the coastline from beach, to cliff, to rock, to stone. I want to show the coastline it is made better by time and will of nature. I want to show the beach showing as the light from the sun bounces off of it. I want you to see it in all its vivid color that's why these images are now HDR and you are seeing the most light detail possible perceived. I hope you like these pictures they took time and effort to create and I enjoy viewing them. </h2></div>
		  </div>
		   <div id="text_items2">

		  				<div id="item2_0"><h1>The Forest </h1>
		  									<span id="title_sig">
		  									  <p>By Brian Spiegel.<br/></p>
		  									</span>
		  				</div>
					<div id="item2_1">
					<h2>
					I'm going to show the forest from branch to tree to running stream to rivers. I have a sort of a problem not many people of seeing these sites I've seen, I need your help you see to fill in your imagination and see into the forests as I see them. I hope you enjoy these photographs I have enjoyed creating and editing them and finally showing them.
					</h2>
				</div>
			</div>
		</div>
    </div>
    <div id="sig">
      <p><span id="index"></span> Brian Spiegel.<br/></p>
    </div>
    <div id="btncontainer">
		<audio   id="myAudio" loop="true">
		  <source src="#" type="audio/mpeg"/>
		  Your browser does not support the audio tag.
	  	</audio>
	  	<div id="innerBtnContainer">
			<img src="slide_show_assets/menu.png" title="Menu" id="menuBtn" />
			<span id="projects_container">
				<img src="the_sea_portfiolo/cover_thumbnail/_MG_2601_2_3_4_6_7_8.jpg" title="The Sea" id="theSea" class="thumbnail" />
				<img src="the_forest_portfolio/coverThumbnail/_MG_7294And8more.jpg" title="The Forest" id="theForest" class="thumbnail" />
			</span>
	  	</div>
    <img src="https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/slide_show_assets/p.png" title="Pause" id="pausebtn"/>
    <img src="https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/audio_icons/mute_off.png" title="Mute" id="mutebtn"/>
	</div>
	<div id="dummy"></div>
	<div id="dummy2"></div>
	<div id="dummy3"></div>
		<script type="module">

		//autoplay="true"

			import * as THREE from '/SlideShow_GPU_HDR/three.js/build/three.module.js';

			import { GUI } from '/SlideShow_GPU_HDR/three.js/examples/jsm/libs/dat.gui.module.js';

			import { RGBELoader } from '/SlideShow_GPU_HDR/three.js/examples/jsm/loaders/RGBELoader.js';

			var params = {
				exposure: 2.0
			};

			var renderer, scene, camera;

			var files =['https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2525And7more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2601_2_3_4_6_7_8.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2755And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_3660And7more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4144_5_6_newest.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4191_2_3.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4940And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_5471And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_5569And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_6256And9more2.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_6313And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_7030And7more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_7645And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8418And7more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8633_4_5_6_7_8_9.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8643And9more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_9146And9more_more.hdr',
						'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_9656And9more.hdr'];
				//document.getElementById("myAudio").play();

				var setsOfFiles = 	{theSea: {name: "The Sea" ,audio_file:  'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/mp3/ocean_waves.mp3',
											text_list: ["item_0","item_1"], list:[
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2525And7more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2601_2_3_4_6_7_8.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_2755And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_3660And7more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4144_5_6_newest.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4191_2_3.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_4940And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_5471And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_5569And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_6256And9more2.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_6313And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_7030And7more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_7645And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8418And7more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8633_4_5_6_7_8_9.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_8643And9more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_9146And9more_more.hdr',
											'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/the_sea_portfiolo/_MG_9656And9more.hdr']},
										theForest: {name: "The Forest", audio_file: 'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/mp3/the_forest.mp3', text_list: ["item2_0","item2_1"], list:[
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0886And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_2343And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_5545And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_5560And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_8041And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_3677 Panorama.jpg",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_9778_79_80.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_9700And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_8583_4_5.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_8208_09_10_i.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0152And9more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0239_40_41_42_43.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_7294And8more.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/IMG_5471_2_3_4.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/IMG_5499_500_501_502.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/IMG_5495_6_7_8.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0320_1_2_3_4.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_6033 Panorama.jpg",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0227_8.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_0194_5.hdr",
											"https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/gh-pages/the_forest_portfolio/_MG_9713_4_5.hdr"
										]}};

				init();

			function init() {
				//var b = new debugClass({createNode:1,nodeId:"test"});
				var t = 0;
				var timerObj      = [null];// setInterval(set_aminte_pulse(params, t), 1);
				var element = { bit: 1, playBtnImage : 'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/slide_show_assets/play.png',
									   pauseBtnImage :'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/slide_show_assets/p.png',
									   muteOffBtnImage :'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/audio_icons/mute_off.png',
									   muteonBtnImage :'https://raw.githubusercontent.com/flyingdeath/SlideShow_GPU_HDR/master/audio_icons/mute_on.png',
									   menuIcon: '/slide_show_assets/menu.png',
									   mutebtn : "mutebtn",
									   pbtnId:'pausebtn',
									   s : scene,
									   f : files,
									   sets: setsOfFiles,
									   st : 0,
									   ft: "crossFade",//"none",// "OutIn", //"crossFade",
									   audioBit: 1,
									   t : [],
									   p: params,
									   debug: null,
									   tObj: [null]
									   };
			    YAHOO.util.Event.addListener(element.pbtnId, 'click', toggleShow, element);
			    YAHOO.util.Event.addListener(element.mutebtn, 'click', toggleAudio, element);


				  var textList =  ["item_0","item_1"];
			 	 var i = 8;



				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth -30, window.innerHeight -30);
				document.getElementById('container').appendChild( renderer.domElement );

				YAHOO.util.Dom.generateId(renderer.domElement);

				var id = renderer.domElement.id;


				//renderer.toneMapping = THREE.ReinhardToneMapping;
				renderer.toneMappingExposure = params.exposure;

				renderer.gammaOutput = true;

				scene = new THREE.Scene();
				var h = new helperClass();
				var aspect = window.innerWidth / window.innerHeight;
				camera = new THREE.OrthographicCamera( - aspect, aspect, 1, - 1, 0, 1 );
				var texture01 =[];


  				function changeToDifferentShow(eventObj, element){
       			    clearInterval(element.slide_showObj);
					var targetId = YAHOO.util.Event.getTarget(eventObj).id;
					element.st =0;
					element.tObj[3] =targetId;
       				clearTimeout(element.textShow.element.timer)
       				for(var x= 0; x<element.textShow.textList.length;x++){
						h.hide(element.textShow.textList[x]);
       				}
					h.show( element.sets[targetId].text_list[0]);
					h.hide(id,'v');
					document.getElementById("myAudio").muted = true;
					var SlideShowTitle = document.getElementById("SlideShowTitle");
					SlideShowTitle.innerHTML =  element.sets[targetId].name + " By,  Brian Spiegel.";
					SlideShowTitle = h.deleteDomElement(SlideShowTitle);

					element.textShow =  h.deleteDomElement(element.textShow);
					element.textShow = new slideShowClass({fade:true,
											  fadeTime:1.5,
											  initInterval:i,
											  interval: i*2,
											  'textList': element.sets[targetId].text_list,
											  onCompleteDelay:i/2,
												onComplete: function(){
													 changeAduioSrc('myAudio',element.sets[targetId].audio_file);
													 var domAudioObj =  document.getElementById("myAudio");
													domAudioObj.muted = false;
													domAudioObj.load();
													domAudioObj.play();
													domAudioObj = h.deleteDomElement(domAudioObj);
													h.show("sig");
													h.show(id,'v');
													setnewtexture(scene, element.sets[targetId].list[0], element.t, params, element.tObj, element.st, element.sets[targetId].list.length,element.ft,"new", element.debug, element);
													element.st++;
													h.updateHTML('index',"1/"+ element.sets[targetId].list.length + "<br/>" + element.sets[targetId].name + " by , <br/> " );
													element.tObj[2] =  element.sets[targetId].name;

													element.slide_showObj = setInterval(
															slideShow(element.s, element.sets[targetId].list,element.st, element.t, element.p, element.tObj, element.ft, element.debug, element),8000);


											  }
											  });
  				}
				function changeAduioSrc(id,src){
					var domObj = document.getElementById(id);
					if(domObj){
					  domObj.children[0].src = src;
					}
					domObj = new helperClass().deleteDomElement(domObj);
				 }

				function changeImageSrc(id,src){
					var domObj = document.getElementById(id);
					if(domObj){
					  domObj.src = src;
					}
					domObj = new helperClass().deleteDomElement(domObj);
				 }

				window.addEventListener( 'resize', onWindowResize, false );

				function set_aminte_pulse(p,t){
					var param01 = p, ticks = t;
					var flag = false;
					return function(){
							if(param01){
								param01.exposure = Math.sin(ticks*0.01 ) +1;
								render();
								if(flag){
									ticks--;
								}else{
									ticks++;
								}
								if( ticks == Number.MAX_VALUE){
								 flag = true;
								}
								if( ticks == 0){
								 flag = false;
								}
							}
					}
				}
 				//setInterval(function(){ alert("Hello"); }, 3000);
				function slideShow(scene,files,ticks, texture01, params, timerobj, fadeType , debug, element){
					var t0 =	ticks, par = params, texture01, timer = timerobj, ft = fadeType, d = debug, el = element;
					var s = scene, f = files;
					return function (){
						setnewtexture(s,f[t0], texture01, par,timer, t0, f.length, ft,false, d, el);


						t0++;
						if(t0 == f.length){
							t0 = 0;
						}
					}
				}
 					h.hide("sig");
  					h.show(element.sets.theForest.text_list[0])
					var SlideShowTitle = document.getElementById("SlideShowTitle");
					SlideShowTitle.innerHTML =  element.sets.theForest.name + " By,  Brian Spiegel.";
					SlideShowTitle = h.deleteDomElement(SlideShowTitle);
			    YAHOO.util.Event.addListener(["theSea", "theForest" ], 'click', changeToDifferentShow, element);

			 element.textShow = new slideShowClass({fade:true,
				                      fadeTime:1.5,
				                      initInterval:i,
				                      interval: i*2,
				                      'textList': element.sets.theForest.text_list,
				                      onCompleteDelay:i/2,
                      					onComplete: function(){
											 changeAduioSrc('myAudio',element.sets.theForest.audio_file);
											 var domAudioObj =  document.getElementById("myAudio");
											 domAudioObj.load();
											 domAudioObj.play();
											 h.deleteDomElement(domAudioObj);

 											h.show("sig");
											setnewtexture(scene,element.sets.theForest.list[0], element.t, params, element.tObj, element.st, element.sets.theForest.list.length,element.ft,"new", element.debug, element);
											element.st++;
											element.tObj[3] ='theForest';
											h.updateHTML('index',"1/"+ element.sets.theForest.list.length + "<br/>" + element.sets.theForest.name + " by , <br/> " );
											element.tObj[2] =  element.sets.theForest.name ;

											element.slide_showObj = setInterval(
													slideShow(element.s,element.sets.theForest.list,element.st, element.t, element.p, element.tObj, element.ft, element.debug, element),8000);


									  }
									  });
								/*		  */

								// audio_file

				function toggleAudio(eventObj, element){
					if(element.audioBit){
					   changeImageSrc(element.mutebtn,element.muteonBtnImage);
					   element.audioBit = 0 ;
						document.getElementById("myAudio").muted = true;
					 }else{
					   element.audioBit = 1 ;
					   changeImageSrc(element.mutebtn,element.muteOffBtnImage);
						document.getElementById("myAudio").muted = false;

					}

				}
				function toggleShow(eventObj, element){
					if(element.bit){
					   changeImageSrc(element.pbtnId,element.playBtnImage);
       				   clearInterval(element.slide_showObj);
					   element.bit = 0 ;
					 }else{
					   element.bit = 1 ;
					   element.st++;
					   slideShow(element.s,element.sets[element.tObj[3]].list,element.st, element.t, element.p, element.tObj, element.ft, element.debug, element)();
					   changeImageSrc(element.pbtnId,element.pauseBtnImage);
       				   clearInterval(element.slide_showObj);
						element.slide_showObj = setInterval(
								slideShow(element.s,element.sets[element.tObj[3]].list,element.st, element.t, element.p, element.tObj, element.ft, element.debug, element),10000)
					}

				}
				//var gui = new GUI();

				//gui.add( params, 'exposure', 0, 4, 0.01 ).onChange( render );
				//gui.open();

			function setnewtexture(scene, filepath, oldmesh, param0, time, index, len, fadeType, isNew,debug, el){
				var broken = filepath.split('.');
				var file_ext = broken[broken.length -1 ];

				if(el.t[0]){
				  	if (fadeType  == "OutIn"){
						  h.fadeAnimation({run: true,
						  seconds: 3,
						  obj:"dummy3",
						  method: YAHOO.util.Easing.easeOutStrong,
						  start:1.0,
						  finish: 0.0,
						  onTween:function(obj1,obj2,obj3){
						  		if(file_ext){
									param0.exposure  = parseFloat(YAHOO.util.Dom.getStyle("dummy3","opacity"))*1.2;
								}else{
									 el.t.material.opacity =  parseFloat(YAHOO.util.Dom.getStyle("dummy3","opacity"));
								}
								render();
						  },
						  onComplete:function(){
								param0.exposure  = 0;
								render();
								scene.remove( el.t[0] );
								render();
							  setMesh(filepath,id,params, t, time, el.t, index, len, fadeType, isNew,debug, el);


						  },
						  onStart: function(){
							YAHOO.util.Dom.setStyle("dummy3","opacity",1.0)
							//h.show(renderer.domElement);
						  }});
					}else{
							  setMesh(filepath,id,params, t, time, el.t, index, len, fadeType, isNew,debug, el);
					}
				}else{
					setMesh(filepath,id,param0, t, time, el.t, index, len, fadeType, isNew,debug, el);
				}


			}


			function setMesh(filepath,id0,params, t, timerObj, texture_mesh, index, len,fadeType, isNew,debug, el){
				var broken = filepath.split('.');
				var file_ext = broken[broken.length -1 ];

				var setImage = function ( texture, textureData ) {
										try{

											//console.log( textureData );
											//console.log( texture );

											var material = new THREE.MeshBasicMaterial( { map: texture } );
											if(textureData){
												renderer.gammaOutput = true;
											   var quad = new THREE.PlaneBufferGeometry( 1.5 * textureData.width / textureData.height, 1.5 );
											}else{
												renderer.gammaOutput = false;
											   var quad = new THREE.PlaneBufferGeometry( 1.5 * texture.image.width / texture.image.height, 1.5 );

											}
												var mesh = new THREE.Mesh( quad, material );

												scene.add(mesh);
												if(!isNew &&  fadeType !== "OutIn"){
														mesh.material.opacity = 1.0;
														mesh.material.transparent = false;
													if(textureData){
														params.exposure  = 1.2;
													}else{
														params.exposure  = 1;
													}
												}

												if(el.t[0]   &&  fadeType !== "OutIn"){
													el.t[0].material.transparent = true;
													el.t[0].material.opacity = 1.0;
												}

											if( "OutIn" == fadeType){
												if(el.t[0]){
													el.t[0] = mesh;
												}
												params.exposure  = 0;
												h.fadeAnimation({run: true, seconds:3,
													obj:"dummy3",
													start:0.0,
													finish: 1.0,
													method: YAHOO.util.Easing.easeInStrong,
													onTween:function(obj1,obj2,obj3){
														if(textureData){
															params.exposure  = parseFloat(YAHOO.util.Dom.getStyle("dummy3","opacity"))*1.2;
														}else{
															mesh.material.opacity =  parseFloat(YAHOO.util.Dom.getStyle("dummy3","opacity"));
														}
														render();
													},
													onComplete:function(){
														el.t[0] = mesh;
													},
													onStart: function(){
														if( Number.isInteger(index)){
															h.updateHTML('index', parseInt(index+1) +"/"+len + "<br/>"+timerObj[2] +" By, <br/> " );
														}
														YAHOO.util.Dom.setStyle("dummy3","opacity",0.0);
													}});
											}else if("crossFade" == fadeType){
												mesh.material.opacity = 0.0;
												mesh.material.transparent = true;

												//	method: YAHOO.util.Easing.easeOutStrong,
												if(texture_mesh[0]){
													h.fadeAnimation({run: true, seconds:3,
														obj:"dummy2",
														start:1.0,
														finish: 0.0,
														onComplete:function(){
															timerObj[1] = "done";
														},
														onTween:function(obj1,obj2,obj3){
															if(timerObj[1] !== "done"){
																//debug.output(parseFloat(YAHOO.util.Dom.getStyle("dummy2","opacity")))
																//render();
															}
														},
														onStart: function(){
															timerObj[1] = "";
															el.t[0].opacity = 1.0;
															el.t[0].transparent = true;

															if(textureData){
																params.exposure  = 1.2;
															}else{
																params.exposure  = 1;
															}


															el.t[0].material.opacity =   1.0;
															if( Number.isInteger(index)){
																h.updateHTML('index', parseInt(index+1) +"/"+len + "<br/>"+timerObj[2] + " By, <br/> " );
															}
															YAHOO.util.Dom.setStyle("dummy2","opacity",1.0);
														}});
												}
											//method: YAHOO.util.Easing.easeInStrong,

												h.fadeAnimation({run: true, seconds:3,
													obj:"dummy",
													start:0.0,
													finish: 1.0,
													onTween:function(obj1,obj2,obj3){
														//params.exposure  = parseFloat(YAHOO.util.Dom.getStyle("dummy","opacity")*1.2);
														if(timerObj[1] !== "done"){
															if(texture_mesh[0]){
																texture_mesh[0].material.opacity =  parseFloat(YAHOO.util.Dom.getStyle("dummy2","opacity"));
															}
															mesh.material.opacity =  parseFloat(YAHOO.util.Dom.getStyle("dummy","opacity"));
															render();
														}
													},
														onComplete:function(){
															if(el.t[0]){
																scene.remove( el.t[0] );
															}
															//params.exposure  = 1.2;
															mesh.material.opacity = 1.0;
															timerObj[1] = "done";
															render();
																el.t[0] = mesh;



														},
													onStart: function(){
														//params.exposure  = 0.0;
														params.exposure  = 1.2;
														mesh.material.opacity =   0.0;
														if( Number.isInteger(index)){
															h.updateHTML('index', parseInt(index+1) +"/"+len + "<br/>"+timerObj[2] +" By, <br/> " );
														}
														YAHOO.util.Dom.setStyle("dummy","opacity",0.0);
														render();
													}});
											}else{

												mesh.material.opacity = 1.0;
												mesh.material.transparent = false;
													if(textureData){
														params.exposure  = 1.2;
													}else{

														params.exposure  = 1;
													}

												if(texture_mesh[0]){
													scene.remove( el.t[0] );

												}
												h.updateHTML('index', parseInt(index + 1) +"/"+len + "<br/>"+timerObj[2] +"  By, <br/> " );
												render();
												el.t[0] = mesh;
											}
										}catch(error){
											debugger;
										}

										//  clearInterval(timerObj[0]);
										//  timerObj[0] =null;
										// timerObj[0] = setInterval(set_aminte_pulse(params, t), 1);
					}




				switch(file_ext){
					case 'hdr':
						 new RGBELoader()
							.setDataType( THREE.UnsignedByteType ) // alt: FloatType, HalfFloatType
							.load( filepath, setImage );
							break;
					default:
						THREE.ImageUtils.loadTexture(filepath, {}, setImage);
						break;




				}

			}


			}

			function onWindowResize() {

				var aspect = window.innerWidth / window.innerHeight;

				var frustumHeight = camera.top - camera.bottom;

				camera.left = - frustumHeight * aspect / 2;
				camera.right = frustumHeight * aspect / 2;

				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth -30, window.innerHeight-30 );

				render();

			}

			//

			function render() {

				renderer.toneMappingExposure = params.exposure;

				renderer.render( scene, camera );

			}


		</script>
	</body>
</html>
